# Coolify Production environment template.
# Use Coolify secrets or clone to `.env.production.local` for validation.

# --- Required secrets ---
POSTGRES_PASSWORD=${POSTGRES_PASSWORD:?ERROR: POSTGRES_PASSWORD is required}
RABBITMQ_PASSWORD=${RABBITMQ_PASSWORD:?ERROR: RABBITMQ_PASSWORD is required}
MINIO_SECRET_KEY=${MINIO_SECRET_KEY:?ERROR: MINIO_SECRET_KEY is required}
# Production環境ではセキュリティ強化のため、MinIO Access Keyの明示的な設定を必須としています。
# development/staging環境ではデフォルト値（minioadmin）を使用可能ですが、
# 本番環境では推測困難な値を設定してください。
MINIO_ACCESS_KEY=${MINIO_ACCESS_KEY:?ERROR: MINIO_ACCESS_KEY is required}
GEMINI_API_KEY=${GEMINI_API_KEY:?ERROR: GEMINI_API_KEY is required}

# --- Suggested defaults ---
POSTGRES_USER=${POSTGRES_USER:-admin}
POSTGRES_DB=${POSTGRES_DB:-eeg_data}
POSTGRES_HOST=${POSTGRES_HOST:-db}
POSTGRES_PORT=${POSTGRES_PORT:-5432}

RABBITMQ_USER=${RABBITMQ_USER:-guest}
RABBITMQ_HOST=${RABBITMQ_HOST:-rabbitmq}
RABBITMQ_PORT=${RABBITMQ_PORT:-5672}

MINIO_ENDPOINT=${MINIO_ENDPOINT:-minio}
MINIO_PORT=${MINIO_PORT:-9000}
MINIO_USE_SSL=${MINIO_USE_SSL:-false}
MINIO_RAW_DATA_BUCKET=${MINIO_RAW_DATA_BUCKET:-raw-data}
MINIO_MEDIA_BUCKET=${MINIO_MEDIA_BUCKET:-media}
MINIO_BIDS_EXPORTS_BUCKET=${MINIO_BIDS_EXPORTS_BUCKET:-bids-exports}
MINIO_ERP_MODELS_BUCKET=${MINIO_ERP_MODELS_BUCKET:-erp-models}

NGINX_PORT=${NGINX_PORT:-80}
ERP_SERVICE_PORT=${ERP_SERVICE_PORT:-8001}
OBSERVABILITY_PORT=${OBSERVABILITY_PORT:-8090}

# --- Queue Names ---
RAW_DATA_EXCHANGE=${RAW_DATA_EXCHANGE:-raw_data_exchange}
PROCESSING_QUEUE=${PROCESSING_QUEUE:-processing_queue}
MEDIA_PROCESSING_QUEUE=${MEDIA_PROCESSING_QUEUE:-media_processing_queue}
DATA_LINKER_QUEUE=${DATA_LINKER_QUEUE:-data_linker_queue}
STIMULUS_ASSET_QUEUE=${STIMULUS_ASSET_QUEUE:-stimulus_asset_queue}
EVENT_CORRECTION_QUEUE=${EVENT_CORRECTION_QUEUE:-event_correction_queue}
BIDS_EXPORT_REQUEST_QUEUE=${BIDS_EXPORT_REQUEST_QUEUE:-bids_export_request_queue}
BIDS_EXPORT_COMPLETION_QUEUE=${BIDS_EXPORT_COMPLETION_QUEUE:-bids_export_completion_queue}

MEDIA_PREFETCH=${MEDIA_PREFETCH:-1}

AUTH_MANAGER_URL=${AUTH_MANAGER_URL:-http://auth_manager:3000}
BIDS_EXPORTER_URL=${BIDS_EXPORTER_URL:-http://bids_exporter:8000}

# --- Observability Dashboard ---
OBSERVABILITY_DASHBOARD_REFRESH_MS=${OBSERVABILITY_DASHBOARD_REFRESH_MS:-4000}
OBSERVABILITY_BASIC_USER=${OBSERVABILITY_BASIC_USER:-observer}
OBSERVABILITY_BASIC_PASSWORD=${OBSERVABILITY_BASIC_PASSWORD:-biosigmatch}
OBSERVABILITY_BASIC_REALM=${OBSERVABILITY_BASIC_REALM:-Observability Dashboard}

# --- Channel Quality Thresholds ---
CHANNEL_ZERO_RATIO_THRESHOLD=${CHANNEL_ZERO_RATIO_THRESHOLD:-0.98}
CHANNEL_FLATLINE_PTP_THRESHOLD=${CHANNEL_FLATLINE_PTP_THRESHOLD:-5}
CHANNEL_BAD_IMPEDANCE_THRESHOLD=${CHANNEL_BAD_IMPEDANCE_THRESHOLD:-200}
CHANNEL_BAD_IMPEDANCE_RATIO=${CHANNEL_BAD_IMPEDANCE_RATIO:-0.5}
CHANNEL_UNKNOWN_IMPEDANCE_RATIO=${CHANNEL_UNKNOWN_IMPEDANCE_RATIO:-0.75}

# --- Coolify managed credentials (optional) ---
# Example:
# POSTGRES_PASSWORD=${SERVICE_PASSWORD_POSTGRES}
# RABBITMQ_PASSWORD=${SERVICE_PASSWORD_RABBITMQ}
